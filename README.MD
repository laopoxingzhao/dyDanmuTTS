
# 抖音网页版弹幕数据抓取


### 环境：
- windows 10
- python 3.7+
- `protoc`版本：`libprotoc 25.1`
- NodeJs v18.2.0


## 功能特色

- ✅ 抓取直播间弹幕（聊天、点赞、礼物、关注、统计等消息）
- ✅ 解析Protobuf格式数据
- ✅ 自动计算signature和a_bogus参数
- ✅ 支持文字转语音(TTS)播放弹幕
- ✅ 支持播放video目录下的视频文件


## 有效测试：

- [x] 2024/11/07 09:04 成功  测试成功,根据[PPG888](https://github.com/PPG888) 提出的[issue#74](https://github.com/saermart/DouyinLiveWebFetcher/issues/74)更新signature获取方式
- [x] 2024/12/01 15:08 成功  测试成功
- [x] 2024/12/11 15:08 成功  测试成功,添加赞赏渠道(thx :)
- [x] 2025/01/27 18:43 成功  测试成功
- [x] 2025/01/28 09:15 成功  测试成功，新年快乐！！
- [x] 2025/06/22 21:09 成功  更新wss，测试成功
- [x] 2025/07/05 21:10 成功  测试成功
- [x] 2025/07/26 10:59 成功  测试成功
- [x] 2025/08/05 09:02 成功  测试成功
- [x] 2025/09/01 16:06 成功  测试成功
- [x] 2025/09/10 16:39 成功  弹幕接口测试成功
- [x] 2025/09/13 23:24 成功  测试成功,添加a_bogus参数
- [x] 2025/09/27 16:14 成功  测试弹幕接口成功



## 抓取样例：
```
【进场msg】[79026102598][男]🌈尘埃🌈🌈 进入了直播间
【进场msg】[3548874980203464][男]姚先生 进入了直播间
【进场msg】[2594451873598365][女]王大锤锤锤 进入了直播间
【进场msg】[106602887532][男]嗨！ 进入了直播间
【进场msg】[1082384846973134][男]青泥湖茶食会所 进入了直播间
【进场msg】[94817345810][男]每天都要看妞，只为心情愉悦 进入了直播间
【进场msg】[83021093936][男]和财汽贸 进入了直播间
【进场msg】[106001704984][男]静能生慧 进入了直播间
【进场msg】[70493659812][男]格  局๑҉ 进入了直播间
【进场msg】[76589441190][女]大龙 进入了直播间
【进场msg】[70881184745][男]李浩哲 进入了直播间
【进场msg】[100754703019][男]RussB 进入了直播间
【进场msg】[102074576531][男]瞳可道 进入了直播间
【礼物msg】X L 送出了 为你点亮x1
【进场msg】[6782769126][男]舒克先生 进入了直播间
【进场msg】[59189841620][女]冷瞳 进入了直播间
【进场msg】[72741706046][男]I＇m glad to be part of you 进入了直播间
【点赞msg】小程๑ 点了9个赞
【进场msg】[1543342918217780][男]上班很烦丶 进入了直播间
【点赞msg】山东秋实微耗节能灶 点了12个赞
【进场msg】[70657797444][男]🌈itsDav 进入了直播间
【进场msg】[98472911773][男]真的小狮子 进入了直播间
【进场msg】[69456861335][男]何苦 进入了直播间
【进场msg】[81597830598][男]毣 进入了直播间
【统计msg】当前观看人数: 22164, 累计观看人数: 43.6万
【进场msg】[97729506904][男]流年 进入了直播间
【聊天msg】[67197561586]说谎: 去拿 去拿去哪
【进场msg】[1772006534547923][男]111 进入了直播间
【进场msg】[1437751228776316][女]🌈星辰 进入了直播间
【进场msg】[84994892671][男]浅蓝色的期许 进入了直播间
【聊天msg】[58977458943]🌈烹世酌生: 厕所里有6倍
【礼物msg】X L 送出了 为你点亮x1
【点赞msg】小程๑ 点了11个赞
【点赞msg】山东秋实微耗节能灶 点了1个赞
【进场msg】[2286579209737694][男]🐭🐮🐍🐔 进入了直播间
【进场msg】[60451809684][男]Nine九妹纸 进入了直播间
【进场msg】[84538127235][男]🆑No smoking 进入了直播间
【进场msg】[3984224739660126][男]か大龍貓か 进入了直播间
【进场msg】[77098767219][男]魑魅魍魉 进入了直播间
【进场msg】[25526482899][女]乘风 进入了直播间
【进场msg】[1939189844950083][男]一个疯批帅哥 进入了直播间
【点赞msg】小程๑ 点了9个赞
【进场msg】[71283358628][男]🌈纯黑 进入了直播间
【点赞msg】山东秋实微耗节能灶 点了8个赞
【进场msg】[1559550207732659][女]用户5865026012091 进入了直播间
【礼物msg】🐷囔囔滴男盆友 送出了 粉丝团灯牌x1
【进场msg】[71297253367][男]ꪏꪶꪭꪆꪮ   皮 进入了直播间
【进场msg】[108182840023][男]Time 进入了直播间
【进场msg】[3918302612818491][女]用户4168810991567 进入了直播间
【进场msg】[108698785871][男]万一啊 进入了直播间
【进场msg】[24033588453][男]Intro 进入了直播间
【点赞msg】小程๑ 点了3个赞
【点赞msg】山东秋实微耗节能灶 点了1个赞
【礼物msg】安好． 送出了 入团卡x1
【进场msg】[87369427576][男]失格 进入了直播间
【粉丝团msg】 恭喜 安好． 成为粉丝团第289687名成员
【进场msg】[96183051026][男]王胖子 进入了直播间
【进场msg】[3931489880510067][男]leee 进入了直播间
【统计msg】当前观看人数: 22140, 累计观看人数: 43.6万
【进场msg】[73874992083][男]😦 进入了直播间
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 新增功能：视频播放

本项目新增了视频播放功能，可以播放放置在 `video` 目录下的视频文件。

### 使用方法

1. 在项目根目录下创建 `video` 文件夹（如果尚未存在）
2. 将视频文件复制到 `video` 文件夹中
3. 运行视频播放器：
   ```bash
   python video_player_main.py
   ```
4. 根据提示选择要播放的视频文件

### 支持的视频格式

- MP4 (.mp4)
- AVI (.avi)
- MOV (.mov)
- MKV (.mkv)
- FLV (.flv)
- WMV (.wmv)

### 操作说明

- 按 'q' 键退出播放
- 按空格键暂停/继续播放
